bundle:
  name: moneyprinter

include:
  - resources/*.yml

targets:
  production:
    mode: production
    workspace:
      root_path: /Shared/.bundle/prod/${bundle.name}

resources:
  jobs:
    train_job:
      name: MoneyPrinter_Train_DAB
      tags:
        deployment: "DAB"

      tasks:
        - task_key: train_model
          spark_python_task:
            python_file: jobs/train_remote.py
            parameters:
              - "--epochs"
              - "50"
              - "--batch_size"
              - "32"
          environment_key: Default
          
      environments:
        - environment_key: Default
          spec:
            client: "3" # Using version 3 as discovered earlier
            dependencies:
              - mlflow
              - torch
              - scikit-learn
              - pandas
              - numpy
              - joblib
